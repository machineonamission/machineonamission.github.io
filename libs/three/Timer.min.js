class Timer{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=now(),this._delta=0,this._elapsed=0,this._timescale=1,this._usePageVisibilityAPI="undefined"!=typeof document&&void 0!==document.hidden,!0===this._usePageVisibilityAPI&&(this._pageVisibilityHandler=handleVisibilityChange.bind(this),document.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(timescale){return this._timescale=timescale,this}reset(){return this._currentTime=now()-this._startTime,this}dispose(){return!0===this._usePageVisibilityAPI&&document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this}update(timestamp){return!0===this._usePageVisibilityAPI&&!0===document.hidden?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(void 0!==timestamp?timestamp:now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}class FixedTimer extends Timer{constructor(fps=60){super(),this._delta=1/fps*1e3}update(){return this._elapsed+=this._delta*this._timescale,this}}function now(){return("undefined"==typeof performance?Date:performance).now()}function handleVisibilityChange(){!1===document.hidden&&this.reset()}export{Timer,FixedTimer};